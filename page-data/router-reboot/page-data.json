{"componentChunkName":"component---src-templates-post-jsx","path":"/router-reboot/","result":{"data":{"site":{"siteMetadata":{"title":"mikkelrask.github.io"}},"markdownRemark":{"id":"6a995d76-f15b-5d34-a103-fc73921105d0","excerpt":"Okay, så min router er flashet med en custom firmware der hedder openWRT, hvilket jeg tror hører til minoriteten af routere derude, selv blandt de få der måtte læse med her. Men basalt set laver open…","html":"<p>Okay, så min router er flashet med en custom firmware der hedder openWRT, hvilket jeg tror hører til minoriteten af routere derude, selv blandt de få der måtte læse med her. Men basalt set laver openWRT min router til en linux-maskine, der tilfældigvis også kan route internettrafik. En maskine som man kan ssh ind i, køre scripts på osv. En meget lille, og begrænset linux maskine, men en linux maskine trods alt.</p>\n<p>Så for at komme nedetid på mit internet til livs, tjekker jeg løbende om routeren kan pinge 8.8.8.8, som er Google's DNS IP adresse, som er en af de IP adresser jeg stoler på så godt som altid er online, og kan routeren ikke pinge den, venter den 30 sec. og prøver igen.</p>\n<p>Fejler den også 2. gang, genstartes routeren, som alle jo ved er hvordan man i alle scenarier fixer at internettet ikke virker. Den tilføjer ligeledes et dato mærke i filen <code class=\"language-text\">reboot.log</code>, som den selv generer.</p>\n<p>Jeg kører scriptet som et cronjob hvert kvarter. Læs om cron jobs og generer crontab kommandoer nemt her: <a href=\"https://crontab-generator.org/\">https://crontab-generator.org/</a></p>\n<p>Script:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/sh</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token function\">ping</span> <span class=\"token parameter variable\">-c</span> <span class=\"token number\">1</span> <span class=\"token number\">8.8</span>.8.8 <span class=\"token operator\">&amp;></span> /dev/null\n<span class=\"token keyword\">then</span>\n\t<span class=\"token builtin class-name\">exit</span>\n<span class=\"token keyword\">else</span>\n\t<span class=\"token function\">sleep</span> <span class=\"token number\">30</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token function\">ping</span> <span class=\"token parameter variable\">-c</span> <span class=\"token number\">1</span> <span class=\"token number\">8.8</span>.8.8 <span class=\"token operator\">&amp;></span> /dev/null\n\t<span class=\"token keyword\">then</span>\n\t\t<span class=\"token builtin class-name\">exit</span>\n\t<span class=\"token keyword\">else</span>\n\t\t<span class=\"token function\">date</span> <span class=\"token operator\">>></span> reboot.log\n\t\t<span class=\"token function\">reboot</span>\n\t<span class=\"token keyword\">fi</span>\n<span class=\"token keyword\">fi</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Direct download:</p>\n<p><code class=\"language-text\">curl https://raw.githubusercontent.com/mikkelrask/scripts/master/router-reboot.sh -o /reboot-router.sh</code></p>\n<p>Github: <a href=\"https://raw.githubusercontent.com/mikkelrask/scripts/master/router-reboot.sh\">github.com/mikkelrask/scripts</a></p>","frontmatter":{"title":"🛟 router-reboot","date":"September 13, 2020","update":null,"tags":["shell","scripts"],"series":null},"fields":{"slug":"/router-reboot/","readingTime":{"minutes":1.095}}},"seriesList":{"edges":[{"node":{"id":"fde0ad94-0739-54e2-839a-ce71725866da","fields":{"slug":"/smart-doer-telephone/"},"frontmatter":{"title":"📡 Hverdagshack: Smart Dørtelephone med Blynk"}}},{"node":{"id":"15018002-2579-5a56-ac2a-552428c21359","fields":{"slug":"/osx-ubuntu-pare-bluetooth-mus/"},"frontmatter":{"title":"🖱️ Pare bluetooth devices med dual-boot i Ubuntu og OSX"}}},{"node":{"id":"017f0593-153d-5356-a05c-799818cb8779","fields":{"slug":"/rapid-prototyping/"},"frontmatter":{"title":"💨 Rapid prototyping i react (når du vitterligt ikke kan finde ud af noget!)"}}},{"node":{"id":"2f2a60c7-f820-5959-8e57-206495ea5fc4","fields":{"slug":"/phishing-campaign/"},"frontmatter":{"title":"🎣 Phishing kampagner tager dine penge måned for måned"}}},{"node":{"id":"ecb03a62-80f0-5853-9bae-6ad6c4f59be6","fields":{"slug":"/hvorfor-linux/"},"frontmatter":{"title":"🐧 Hvorfor jeg bruger Linux - når jeg kan"}}},{"node":{"id":"61c061c4-c95f-5db1-bb23-384b2d9c83ed","fields":{"slug":"/krypterings-guide/"},"frontmatter":{"title":"🔒 Hvordan man krypterer (næsten) alt"}}},{"node":{"id":"cc086b3e-e4db-5ad0-a253-49c50b20e798","fields":{"slug":"/haveibeenpwned/"},"frontmatter":{"title":"🏴‍☠️ haveibeenpwned.com - er dit password lækket?"}}},{"node":{"id":"f4ecf7d9-f629-5a3e-9705-9ae79492e879","fields":{"slug":"/arctic-mx2-thermal-compound-testing/"},"frontmatter":{"title":"❄️ Arctic MX2 Thermal Compound"}}},{"node":{"id":"f5270d3c-a591-54db-a8d6-216826a3c860","fields":{"slug":"/server-services-sh/"},"frontmatter":{"title":"🐕‍🦺 server-services"}}},{"node":{"id":"6a995d76-f15b-5d34-a103-fc73921105d0","fields":{"slug":"/router-reboot/"},"frontmatter":{"title":"🛟 router-reboot"}}},{"node":{"id":"d628e0fd-b259-5e93-8f9d-010759e0ba71","fields":{"slug":"/confirm-sh/"},"frontmatter":{"title":"🫡 confirm"}}},{"node":{"id":"06a00f8a-0ac5-5c72-af9a-713bcee1437e","fields":{"slug":"/hermitcraft-picker/"},"frontmatter":{"title":"⛏️ Hermitcraft Youtube Picker"}}},{"node":{"id":"c30bbe0d-49ef-5dde-8526-e57d69e086b0","fields":{"slug":"/localhost-docker/"},"frontmatter":{"title":"🐳 Lokal startside med Docker"}}},{"node":{"id":"75d5549c-0a7b-5031-b004-696da0a39ac4","fields":{"slug":"/password-generators/"},"frontmatter":{"title":"💻 Password generators"}}},{"node":{"id":"6ed4f0d2-86c5-53b2-92d8-7532a164a3cd","fields":{"slug":"/linkhandler-sh/"},"frontmatter":{"title":"💻 linkhandler %url%"}}},{"node":{"id":"cb546a58-959b-5503-a763-4bfc475b6e1f","fields":{"slug":"/hibp-lookup/"},"frontmatter":{"title":"💻 hibp %pw%"}}},{"node":{"id":"6aa194f8-bb92-5d5e-98f6-a39da1e24b34","fields":{"slug":"/pomodoro-sh/"},"frontmatter":{"title":"🍅 pomodoro"}}},{"node":{"id":"8774ae1d-20fd-5c32-ae70-5adbb42fd7ab","fields":{"slug":"/folder-backup-with-python/"},"frontmatter":{"title":"🗜️ python-zip-folder"}}},{"node":{"id":"35fb5af6-7a93-50d1-a4f8-0770b57a7da1","fields":{"slug":"/tingfinder-py/"},"frontmatter":{"title":"🔍 tingfinder.py"}}},{"node":{"id":"e7696277-7c4f-5e37-aa36-a25b1188d46f","fields":{"slug":"/notevim/"},"frontmatter":{"title":"🗒️ nvim notetaker"}}},{"node":{"id":"bdbb0f2f-d078-5fd6-a323-ac38cfe50117","fields":{"slug":"/adhd-tech/"},"frontmatter":{"title":"🧠 ADHD og TECH"}}},{"node":{"id":"13a002d2-ec72-5b30-9a76-61c22b87ac11","fields":{"slug":"/nvmacropad/"},"frontmatter":{"title":"🤖 NV Macropad - Prototype"}}},{"node":{"id":"47920522-a8db-5831-8284-bdc90833e7e6","fields":{"slug":"/bankehuset-projekt/"},"frontmatter":{"title":"🛀 BANKEHUSET badevands projektet"}}},{"node":{"id":"d66728e3-5bb7-5918-8b40-1789a8a4ff4f","fields":{"slug":"/send-data-med-mqtt-python/"},"frontmatter":{"title":"📈 Send MQTT data til din MQTT broker med Python "}}}]},"previous":{"fields":{"slug":"/server-services-sh/"},"frontmatter":{"title":"🐕‍🦺 server-services"}},"next":{"fields":{"slug":"/confirm-sh/"},"frontmatter":{"title":"🫡 confirm"}}},"pageContext":{"id":"6a995d76-f15b-5d34-a103-fc73921105d0","series":null,"previousPostId":"f5270d3c-a591-54db-a8d6-216826a3c860","nextPostId":"d628e0fd-b259-5e93-8f9d-010759e0ba71"}},"staticQueryHashes":[]}